version: 2


sources:
  - name: tpch
    description: Welcome to the dbt Labs demo dbt project! We use the [TPCH dataset](https://docs.snowflake.com/en/user-guide/sample-data-tpch.html) to create a sample project to emulate what a production project might look like!
    database: empanaderos
    schema: dbt_eongaro
    
    tables:
      - name: customers
        description: main customer table
        columns:
          - name: c_custkey
            description: unique customer key
            tests:
              - unique:
                  severity: warn
              - not_null:
                  severity: warn
          - name: c_name
            description: customer id
          - name: c_address
            description: address of the customer
          - name: c_nationkey
            description: foreign key to stg_tpch_nations
          - name: c_phone
            description: phone number of the customer
          - name: c_acctbal
            description: raw account balance 
          - name: c_mktsegment
            description: market segment of the customer
          - name: c_comment

      - name: nations
        description: nation mapping
        columns:
          - name: n_nationkey
            description: 25 nations are populated
            tests:
              - unique:
                  severity: warn
              - not_null:
                  severity: warn
          - name: n_name
            description: nation name
          - name: n_regionkey
            description: Foreign Key to R_REGIONKEY
            tests:
              - relationships:
                  to: source('tpch', 'region')
                  field: r_regionkey
          - name: n_comment

      

      - name: regions
        description: region mapping
        columns:
          - name: r_regionkey
            description: 5 regions are populated
            tests:
              - unique:
                  severity: warn
              - not_null:
                  severity: warn
          - name: r_name
            description: region name
          - name: r_comment

     